# Cromwell configuration file

webservice {
  port = 8000
  interface = 0.0.0.0
  instance.name = "cromwell-for-wdl-runner"
}

akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
}

# Cromwell "system" settings
system {
  # Maximum number of input file bytes allowed in order to read each type.
  # If exceeded a FileSizeTooBig exception will be thrown.
  input-read-limits {

    lines = 512000

    #bool = 7

    #int = 19

    #float = 50

    string = 512000

    json = 512000

    tsv = 512000

    map = 512000

    object = 512000
  }
}

spray.can {
  server {
    request-timeout = 40s
  }
  client {
    request-timeout = 40s
    connecting-timeout = 40s
  }
}

backend {
  default = "JES"
  providers {
    JES {
      actor-factory = "cromwell.backend.impl.jes.JesBackendLifecycleActorFactory"
      config {
        project = "${project_id}"
        root = "${working_dir}"

        genomics {
          # A reference to an auth defined in the 'google' stanza at the top.  This auth is used to create
          # Pipelines and manipulate auth JSONs.
          auth = "application-default"
          endpoint-url = "https://genomics.googleapis.com/"
        }

        filesystems = {
          gcs {
            # A reference to a potentially different auth for manipulating files via engine functions.
            auth = "application-default"
          }
        }

      }
    }
  }
}

engine {
  filesystems {
    gcs {
      auth = "application-default"
    }
  }
}

google {
  application-name = "cromwell"
  auths = [
    {
      name = "application-default"
      scheme = "application_default"
    }
  ]
}

database {
  profile = "slick.jdbc.HsqldbProfile$"

  db {
    driver = "org.hsqldb.jdbcDriver"
    url = "jdbc:hsqldb:mem:${slick.uniqueSchema};shutdown=false;hsqldb.tx=mvcc"
    connectionTimeout = 3000
  }
}

instrumentation {
  use-kamon = false
}

